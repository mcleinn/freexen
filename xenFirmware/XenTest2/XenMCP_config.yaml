serial:
  port: COM3
  baud_rate: 115200
  timeout: 1.0
  read_timeout: 15.0
  response_start_string: "OK"

commands:
  set_format_json:
    command: "fmt1\n"
    need_parse: false
    prompts:
      - "set json output"

  set_format_human:
    command: "fmt0\n"
    need_parse: false
    prompts:
      - "set human output"

  set_mux_delay:
    command: "sd{us}\n"
    need_parse: false
    prompts:
      - "set mux delay to {us} microseconds"
  help:
    command: "h\n"
    need_parse: false
    prompts:
      - "show help"
      - "list commands"

  loop_mode:
    command: "l{mode}\n"
    need_parse: false
    prompts:
      - "set loop mode to {mode}"
      - "enter plot mode"
      - "enter calibration mode"
      - "enter normal mode"

  set_key_range:
    command: "k{from},{to}\n"
    need_parse: false
    prompts:
      - "scan keys {from} to {to}"
      - "set key range {from} {to}"

  set_key_color_range:
    command: "kc{from},{to}\n"
    need_parse: false
    prompts:
      - "select keys {from} to {to}"

  set_mux:
    command: "m{value}\n"
    need_parse: false
    prompts:
      - "set mux to {value}"


  set_averaging:
    command: "a{value}\n"
    need_parse: false
    prompts:
      - "set adc averaging to {value}"


  set_threshold:
    command: "t{volts}\n"
    need_parse: false
    prompts:
      - "set threshold to {volts}"

  set_color_selected:
    command: "c{r},{g},{b}\n"
    need_parse: false
    prompts:
      - "set selected key color {r} {g} {b}"

  set_color_all:
    command: "ca{r},{g},{b}\n"
    need_parse: false
    prompts:
      - "set all keys color {r} {g} {b}"

  calibrate:
    command: "x\n"
    need_parse: false
    prompts:
      - "start calibration"
      - "calibrate"

  run:
    command: "r\n"
    need_parse: false
    prompts:
      - "start run mode"

  plot:
    command: "p\n"
    need_parse: false
    prompts:
      - "start plot mode"

  measure_noise:
    command: "n{seconds}\n"
    need_parse: false
    prompts:
      - "measure noise for {seconds} seconds"

  clear_calibration:
    command: "ccalib\n"
    need_parse: false
    prompts:
      - "clear calibration"

  read_key:
    command: "rk{key}\n"
    need_parse: false
    prompts:
      - "read key {key}"

  read_stats:
    command: "rs{key},{ms}\n"
    need_parse: false
    prompts:
      - "measure key {key} for {ms} ms"

  problem_report:
    command: "pr{seconds}\n"
    need_parse: false
    prompts:
      - "noise report for {seconds} seconds"

  scan_rate:
    command: "rate{ms}\n"
    need_parse: false
    prompts:
      - "measure scan rate for {ms} ms"

  idle_audit:
    command: "idle{seconds}\n"
    need_parse: false
    prompts:
      - "idle false trigger audit for {seconds} seconds"

  runtime_perf:
    command: "rperf{seconds}\n"
    need_parse: false
    prompts:
      - "runtime scan performance for {seconds} seconds"

  settle_test:
    command: "st{keyA},{keyB},{delay_us},{samples}\n"
    need_parse: false
    prompts:
      - "settle test from {keyA} to {keyB} with {delay_us} us and {samples} samples"

  settle_sweep:
    command: "sts{keyA},{keyB}\n"
    need_parse: false
    prompts:
      - "settle sweep for keys {keyA} and {keyB}"

  test_a:
    command: "testa\n"
    need_parse: false
    prompts:
      - "run test 0"

  test_b:
    command: "testb\n"
    need_parse: false
    prompts:
      - "run test 1"

  test_c:
    command: "testc{keyA},{keyB}\n"
    need_parse: false
    prompts:
      - "run test 2 for keys {keyA} and {keyB}"

  test_d:
    command: "testd{seconds}\n"
    need_parse: false
    prompts:
      - "run test 3 for {seconds} seconds"

  test_e:
    command: "teste\n"
    need_parse: false
    prompts:
      - "run test 6"

  reset:
    command: "rst\n"
    need_parse: false
    prompts:
      - "reset device"

  version:
    command: "ver\n"
    need_parse: false
    prompts:
      - "get firmware version"

  calibration_status:
    command: "calstat\n"
    need_parse: false
    prompts:
      - "get calibration status"

  load_config:
    command: "lconf{program}\n"
    need_parse: false
    prompts:
      - "load config program {program}"

  save_config:
    command: "sconf{program}\n"
    need_parse: false
    prompts:
      - "save config program {program}"

  load_calib:
    command: "lcalib\n"
    need_parse: false
    prompts:
      - "load calibration"

  save_calib:
    command: "scalib\n"
    need_parse: false
    prompts:
      - "save calibration"

  setup_leds:
    command: "sled{count}\n"
    need_parse: false
    prompts:
      - "setup leds {count}"

  update_leds:
    command: "uled\n"
    need_parse: false
    prompts:
      - "update leds"
